# Smart Workflow Engine (Flagship Project)

An AI-powered automation system combining desktop automation (PyAutoGUI), web automation (Selenium), workflow recording/replay, AI-based screen analysis, web scraping, and recovery tooling. Includes a React frontend (assistant-ui) and a Flask backend API.

## Demo Video

- GitHub-hosted asset (recommended):
  [![Watch the SmartWorkflowengine demo](https://img.youtube.com/vi/VIDEO_ID/maxresdefault.jpg)](https://www.youtube.com/watch?v=VIDEO_ID)

- Or embed a repo-hosted video (add the file at assets/video/SmartWorkflowengine.mp4):
  <video src="assets/video/SmartWorkflowengine.mp4" controls width="720"></video>

Replace VIDEO_ID or the file path with your actual video.

## Features

- Web automation with Selenium
- Desktop automation with PyAutoGUI
- Workflow recording and replay
- AI screen analysis and visual detection
- AI-powered web scraping
- Smart error recovery and retries
- React frontend for control and status

## Repository Structure

- Backend (Flask API, automation core)
  - api.py – Flask server and endpoints
  - assistant_bot.py – action executor and integrations
  - workflow_recorder.py – record/replay workflows
  - screen_analyzer.py – screen OCR and AI analysis
  - web_scraper.py – Selenium-driven, AI-assisted scraping
  - chat_interface.py – AI chat helpers
- Frontend
  - assistant-ui/ – React app (CRA)

## Prerequisites

- Windows 10/11
- Python 3.10+
- Node.js 18+ and npm
- Google Gemini API key (for AI features)
- Chrome installed (for Selenium)

Optional:
- Tesseract OCR (for OCR features)
- ChromeDriver managed via Selenium (auto-managed in most setups)

## Backend Setup (Flask)

1) Create and activate venv (Windows PowerShell):
```
python -m venv venv
venv\Scripts\activate
```

2) Install dependencies:
```
pip install flask flask-cors selenium pyautogui opencv-python pillow numpy pytesseract google-generativeai beautifulsoup4 lxml
```

3) Run the API:
```
python api.py
```

The server starts on http://localhost:8000 and prints available endpoints.

4) Set your Gemini API key (required for AI features):
```
curl -X POST http://localhost:8000/api/validate-api-key ^
  -H "Content-Type: application/json" ^
  -d "{\"api_key\":\"YOUR_GEMINI_API_KEY\"}"
```

## Frontend Setup (assistant-ui)

1) Install:
```
cd assistant-ui
npm install
```

2) Configure backend URL:
- EITHER set proxy in assistant-ui/package.json:
```
"proxy": "http://localhost:8000"
```
- OR create .env:
```
REACT_APP_API_BASE=http://localhost:8000
```

3) Start:
```
npm start
```

## Key API Endpoints

Workflow recording:
- POST /api/workflow/record/start
- POST /api/workflow/record/stop
- POST /api/workflow/record/force-stop
- GET  /api/workflow/record/status
- GET  /api/workflows

Execution and utilities:
- POST /api/execute
- POST /api/screenshot
- POST /api/screen/analyze
- POST /api/chat
- POST /api/web/analyze

API key:
- GET  /api/api-key-status
- POST /api/validate-api-key
- POST /api/clear-api-key

Example (start recording):
```
curl -X POST http://localhost:8000/api/workflow/record/start -H "Content-Type: application/json" -d "{}"
```

Note: If you see a 404 on OPTIONS /api/workflow/start, use the correct path /api/workflow/record/start (the non-record path does not exist).

## Usage Examples

- Open Cisco Packet Tracer and connect two PCs:
  - Use frontend prompt or POST /api/execute with steps generated by the system.
- Take a screenshot:
```
curl -X POST http://localhost:8000/api/screenshot -H "Content-Type: application/json" -d "{\"filename\":\"shot.png\"}"
```

## Troubleshooting

- 404 on OPTIONS: Ensure you are calling a valid route. For workflow recording, use /api/workflow/record/start.
- CORS: If calling from a different origin, enable CORS in Flask (flask-cors installed) or use the CRA proxy.
- Missing dependencies: Install the packages listed above and ensure Tesseract is installed if OCR is needed.

## Contributing

- Fork, create a feature branch, and submit a PR.
- Keep code linted and documented.

## License

Add your preferred license here (e.g., MIT).